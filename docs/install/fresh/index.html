<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://docs.joinsharkey.org/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://docs.joinsharkey.org/fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://docs.joinsharkey.org/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://docs.joinsharkey.org/main.5a41cbb6818e80763eba13767b9789585354906e1ddf488ca8abb5d1a0fadb010155d5b2c87cd5606bc0fae2657405961103bc08c0a8fc209054e5ccc81a4217.css integrity="sha512-WkHLtoGOgHY+uhN2e5eJWFNUkG4d30iMqKu10aD62wEBVdWyyHzVYGvA+uJldAWWEQO8CMCo/CCQVOXMyBpCFw==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Fresh Installation - Sharkey Documentation</title><meta name=description content="Before you start, you really need:
an always-on machine that can receive connections from the Internet a domain name to dedicate to your Sharkey instance, resolving to the address(es) of that machine a web server running on that machine, with valid TLS certificates for the domain name With Docker #Prerequisites:
Docker Compose Plugin Create multiple directories:
mkdir Sharkey &amp;amp;&amp;amp; mkdir Sharkey/.config Fetch all required examples and enter directory:
wget -O Sharkey/docker-compose."><link rel=canonical href=https://docs.joinsharkey.org/docs/install/fresh/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Fresh Installation"><meta property="og:description" content="Before you start, you really need:
an always-on machine that can receive connections from the Internet a domain name to dedicate to your Sharkey instance, resolving to the address(es) of that machine a web server running on that machine, with valid TLS certificates for the domain name With Docker #Prerequisites:
Docker Compose Plugin Create multiple directories:
mkdir Sharkey && mkdir Sharkey/.config Fetch all required examples and enter directory:
wget -O Sharkey/docker-compose."><meta property="og:url" content="https://docs.joinsharkey.org/docs/install/fresh/"><meta property="og:site_name" content="Sharkey Documentation"><meta property="og:image" content="https://docs.joinsharkey.org/doks.png"><meta property="og:image:alt" content="Sharkey Documentation"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@sharkeydocs"><meta name=twitter:creator content="@transfem-org"><meta name=twitter:title content="Fresh Installation"><meta name=twitter:description content><meta name=twitter:image content="https://docs.joinsharkey.org/doks.png"><meta name=twitter:image:alt content="Fresh Installation"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://docs.joinsharkey.org/#/schema/organization/1","name":"Doks","url":"https://docs.joinsharkey.org/","sameAs":["https://twitter.com/getdoks","https://github.com/h-enk/doks"],"logo":{"@type":"ImageObject","@id":"https://docs.joinsharkey.org/#/schema/image/1","url":"https://docs.joinsharkey.org/logo-doks.png","width":512,"height":512,"caption":"Doks"},"image":{"@id":"https://docs.joinsharkey.org/#/schema/image/1"}},{"@type":"WebSite","@id":"https://docs.joinsharkey.org/#/schema/website/1","url":"https://docs.joinsharkey.org/","name":"Sharkey Documentation","description":"Documentation containing all the stuff related to Sharkey","publisher":{"@id":"https://docs.joinsharkey.org/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://docs.joinsharkey.org/docs/install/fresh/","url":"https://docs.joinsharkey.org/docs/install/fresh/","name":"Fresh Installation","description":"","isPartOf":{"@id":"https://docs.joinsharkey.org/#/schema/website/1"},"about":{"@id":"https://docs.joinsharkey.org/#/schema/organization/1"},"datePublished":"0001-01-01T00:00:00CET","dateModified":"0001-01-01T00:00:00CET","breadcrumb":{"@id":"https://docs.joinsharkey.org/docs/install/fresh/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://docs.joinsharkey.org/docs/install/fresh/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://docs.joinsharkey.org/docs/install/fresh/"]}]},{"@type":"BreadcrumbList","@id":"https://docs.joinsharkey.org/docs/install/fresh/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://docs.joinsharkey.org","url":"https://docs.joinsharkey.org","name":"Home"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://docs.joinsharkey.org/docs/","url":"https://docs.joinsharkey.org/docs/","name":"Docs"}},{"@type":"ListItem","position":4,"item":{"@type":"WebPage","@id":"https://docs.joinsharkey.org/docs/install/","url":"https://docs.joinsharkey.org/docs/install/","name":"Install"}},{"@type":"ListItem","position":5,"item":{"@id":"https://docs.joinsharkey.org/docs/install/fresh/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://docs.joinsharkey.org/#/schema/article/1","headline":"Fresh Installation","description":"","isPartOf":{"@id":"https://docs.joinsharkey.org/docs/install/fresh/"},"mainEntityOfPage":{"@id":"https://docs.joinsharkey.org/docs/install/fresh/"},"datePublished":"0001-01-01T00:00:00CET","dateModified":"0001-01-01T00:00:00CET","author":{"@id":"https://docs.joinsharkey.org/#/schema/person/2"},"publisher":{"@id":"https://docs.joinsharkey.org/#/schema/organization/1"},"image":{"@id":"https://docs.joinsharkey.org/docs/install/fresh/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://docs.joinsharkey.org/#/schema/person/2","name":"Henk Verlinde","sameAs":["https://twitter.com/henkverlinde","https://www.linkedin.com/in/henkverlinde/","https://github.com/h-enk"]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://docs.joinsharkey.org/docs/install/fresh/#/schema/image/2","url":"https://docs.joinsharkey.org/doks.png","contentUrl":"https://docs.joinsharkey.org/doks.png","caption":"Fresh Installation"}]}]}</script><meta name=theme-color content="#fff"><link rel=icon href=https://docs.joinsharkey.org/favicon.ico sizes=any><link rel=apple-touch-icon sizes=180x180 href=https://docs.joinsharkey.org/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://docs.joinsharkey.org/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://docs.joinsharkey.org/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://docs.joinsharkey.org/site.webmanifest></head><body class="docs single"><div class=sticky-top><div class=header-bar></div><header class="navbar navbar-expand-lg navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand order-0" href=/ aria-label="Sharkey Documentation">Sharkey Documentation</a>
<button class="btn btn-link order-0 ms-auto d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasExample aria-controls=offcanvasExample><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg></button><div class="offcanvas offcanvas-start d-lg-none" tabindex=-1 id=offcanvasExample aria-labelledby=offcanvasExampleLabel><div class=header-bar></div><div class=offcanvas-header><h5 class=offcanvas-title id=offcanvasExampleLabel>Browse docs</h5><button type=button class=btn-close data-bs-dismiss=offcanvas aria-label=Close></button></div><div class=offcanvas-body><aside class="doks-sidebar mt-n3"><nav id=doks-docs-nav aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-349838fb1d851d3e2014b9fe39203275 aria-expanded=true>
Install</button><div class="collapse show" id=section-349838fb1d851d3e2014b9fe39203275><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded active" href=https://docs.joinsharkey.org/docs/install/fresh/>Fresh Installation</a></li><li><a class="docs-link rounded" href=https://docs.joinsharkey.org/docs/install/migrate/>Migrating from another software</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-f5bfbc80051eaa2963538db69f1de363 aria-expanded=false>
Comparsion</button><div class=collapse id=section-f5bfbc80051eaa2963538db69f1de363><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://docs.joinsharkey.org/docs/comparsion/misskey/>Sharkey vs Misskey</a></li></ul></div></li></ul></nav></aside></div></div><button class="btn btn-menu order-2 d-block d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-lg-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-lg-none"></div><div class="offcanvas-header d-lg-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>Sharkey Documentation</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body p-4 p-lg-0"><ul class="nav flex-column flex-lg-row align-items-lg-center mt-2 mt-lg-0 ms-lg-2 me-lg-auto"></ul><hr class="text-black-50 my-4 d-lg-none"><form class="doks-search position-relative flex-grow-1 ms-lg-auto me-lg-2"><input id=search class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded d-none"></div></form><hr class="text-black-50 my-4 d-lg-none"><ul class="nav flex-column flex-lg-row"><li class=nav-item><a class="nav-link social-link" href=https://github.com/transfem-org><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-lg-none">GitHub</small></a></li></ul><hr class="text-black-50 my-4 d-lg-none"><button id=mode class="btn btn-link" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></div></div></nav></header></div><div class=container-xxl><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-349838fb1d851d3e2014b9fe39203275 aria-expanded=true>
Install</button><div class="collapse show" id=section-349838fb1d851d3e2014b9fe39203275><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded active" href=https://docs.joinsharkey.org/docs/install/fresh/>Fresh Installation</a></li><li><a class="docs-link rounded" href=https://docs.joinsharkey.org/docs/install/migrate/>Migrating from another software</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-f5bfbc80051eaa2963538db69f1de363 aria-expanded=false>
Comparsion</button><div class=collapse id=section-f5bfbc80051eaa2963538db69f1de363><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://docs.joinsharkey.org/docs/comparsion/misskey/>Sharkey vs Misskey</a></li></ul></div></li></ul></nav></aside></div><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-349838fb1d851d3e2014b9fe39203275 aria-expanded=true>
Install</button><div class="collapse show" id=section-349838fb1d851d3e2014b9fe39203275><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded active" href=https://docs.joinsharkey.org/docs/install/fresh/>Fresh Installation</a></li><li><a class="docs-link rounded" href=https://docs.joinsharkey.org/docs/install/migrate/>Migrating from another software</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-f5bfbc80051eaa2963538db69f1de363 aria-expanded=false>
Comparsion</button><div class=collapse id=section-f5bfbc80051eaa2963538db69f1de363><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://docs.joinsharkey.org/docs/comparsion/misskey/>Sharkey vs Misskey</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=d-xl-none><button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type=button data-bs-toggle=collapse data-bs-target=#onThisPage aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle On this page navigation">
<span>On this page</span>
<span><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></span></button><div class=collapse id=onThisPage><div class="card card-body mt-3 py-1"><div class=page-links><nav id=TableOfContents><ul><li><a href=#with-docker>With Docker</a></li><li><a href=#manually>Manually</a><ul><li><a href=#with-systemd>With systemd</a></li><li><a href=#with-openrc>With OpenRC</a></li></ul></li><li><a href=#configure-the-web-server>Configure the web server</a><ul><li><a href=#nginx>NGINX</a></li></ul></li><li><a href=#update-sharkey>Update Sharkey</a></li></ul></nav></div></div></div></div><div class="page-links d-none d-xl-block"><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#with-docker>With Docker</a></li><li><a href=#manually>Manually</a><ul><li><a href=#with-systemd>With systemd</a></li><li><a href=#with-openrc>With OpenRC</a></li></ul></li><li><a href=#configure-the-web-server>Configure the web server</a><ul><li><a href=#nginx>NGINX</a></li></ul></li><li><a href=#update-sharkey>Update Sharkey</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>Fresh Installation</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=d-xl-none><button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type=button data-bs-toggle=collapse data-bs-target=#onThisPage aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle On this page navigation">
<span>On this page</span>
<span><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></span></button><div class=collapse id=onThisPage><div class="card card-body mt-3 py-1"><div class=page-links><nav id=TableOfContents><ul><li><a href=#with-docker>With Docker</a></li><li><a href=#manually>Manually</a><ul><li><a href=#with-systemd>With systemd</a></li><li><a href=#with-openrc>With OpenRC</a></li></ul></li><li><a href=#configure-the-web-server>Configure the web server</a><ul><li><a href=#nginx>NGINX</a></li></ul></li><li><a href=#update-sharkey>Update Sharkey</a></li></ul></nav></div></div></div></div><div class="page-links d-none d-xl-block"><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#with-docker>With Docker</a></li><li><a href=#manually>Manually</a><ul><li><a href=#with-systemd>With systemd</a></li><li><a href=#with-openrc>With OpenRC</a></li></ul></li><li><a href=#configure-the-web-server>Configure the web server</a><ul><li><a href=#nginx>NGINX</a></li></ul></li><li><a href=#update-sharkey>Update Sharkey</a></li></ul></nav></div></nav><p>Before you start, you really need:</p><ul><li>an always-on machine that can receive connections from the Internet</li><li>a domain name to dedicate to your Sharkey instance, resolving to the
address(es) of that machine</li><li>a web server running on that machine, with valid TLS certificates
for the domain name</li></ul><h2 id=with-docker>With Docker <a href=#with-docker class=anchor aria-hidden=true>#</a></h2><p>Prerequisites:</p><ul><li>Docker</li><li>Compose Plugin</li></ul><p>Create multiple directories:</p><pre><code>mkdir Sharkey &amp;&amp; mkdir Sharkey/.config
</code></pre><p>Fetch all required examples and enter directory:</p><pre><code>wget -O Sharkey/docker-compose.yml https://raw.githubusercontent.com/transfem-org/Sharkey/stable/docker-compose.yml.example
wget -O Sharkey/.config/default.yml https://raw.githubusercontent.com/transfem-org/Sharkey/stable/.config/example.yml
wget -O Sharkey/.config/docker.env https://raw.githubusercontent.com/transfem-org/Sharkey/stable/.config/docker_example.env
cd Sharkey
</code></pre><p>Edit <code>.config/default.yml</code>, there are comments explaining what each
option means. In particular, we&rsquo;re going to assume you have:</p><pre><code>url: https://{YOUR DOMAIN NAME}/
</code></pre><p>(replace <code>{YOUR DOMAIN NAME}</code> with the domain name we talked about
at the start).</p><p>Edit <code>docker-compose.yml</code>, there are multiple comments there as
well. If you want to set up note search with meilisearch, uncomment
all of meilisearch options, otherwise proceed to do the following
changes in the <code>services:</code> / <code>web:</code> section:</p><ul><li>uncomment the line that starts with <code>image:</code></li><li>remove the line <code>build: .</code></li></ul><p>Starting:</p><pre><code>docker compose up -d
</code></pre><h2 id=manually>Manually <a href=#manually class=anchor aria-hidden=true>#</a></h2><p><a href=https://misskey-hub.net/en/docs/install/manual.html>Same as
Misskey</a>.</p><p>Prerequisites:</p><ul><li>NodeJS version 20.4 or later, with <em>both</em> <code>npm</code> and <code>pnpm</code>
installed (<code>corepack enable</code> should suffice, make sure you run it
as <code>root</code> if you&rsquo;re using your system NodeJS)</li><li>PostgreSQL version 15 or later</li><li>Redis</li><li>FFmpeg</li><li>all the various packages to compile and build C code, and Python (on
Debian-style systems, that&rsquo;s <code>build-essential</code> & <code>python</code>)</li></ul><p>Create a <code>sharkey</code> user:</p><pre><code>adduser --disabled-password --disabled-login sharkey
</code></pre><p>start a shell as that user:</p><pre><code>sudo -u sharkey -i
</code></pre><p>(or something like that), then:</p><pre><code>git clone --recurse-submodules -b stable https://github.com/transfem-org/Sharkey.git
cd Sharkey
pnpm install --frozen-lockfile
cp .config/example.yml .config/default.yml
</code></pre><p>Edit <code>.config/default.yml</code>, there are comments explaining what each
option means. In particular, we&rsquo;re going to assume you have:</p><pre><code>url: https://{YOUR DOMAIN NAME}/
db:
  host: localhost
  port: 5432
  db: sharkey
  user: sharkey
  pass: {YOUR PASSWORD}
</code></pre><p>(replace <code>{YOUR PASSWORD}</code> with an actual password you make up for
this, and <code>{YOUR DOMAIN NAME}</code> with the domain name we talked about
at the start)</p><p>Building:</p><pre><code>pnpm run build
</code></pre><p>Create the PostgreSQL user and database, either with <code>createuser</code>
and <code>createdb</code> or with <code>sudo -u postgres psql</code> and then:</p><pre><code>create database sharkey with encoding = 'UTF8';
create user sharkey with encrypted password '{YOUR_PASSWORD}';
grant all privileges on database sharkey to sharkey;
alter database sharkey owner to sharkey;
\q
</code></pre><p>(replace <code>{YOUR PASSWORD}</code> with the same password as before)</p><p>Then create the schema:</p><pre><code>pnpm run init
</code></pre><p>And start it:</p><pre><code>pnpm start
</code></pre><p>you should see a series of colourful lines, ending with something
like:</p><pre><code>Now listening on port 3000 on https://example.tld
</code></pre><p>but with a different URL at the end (you <em>did</em> change the <code>url</code>
setting in the config file, right?). Stop that process (control-C is
enough), and set up a system service for Sharkey.</p><h3 id=with-systemd>With systemd <a href=#with-systemd class=anchor aria-hidden=true>#</a></h3><p>Create a file <code>/etc/systemd/system/sharkey.service</code> containing:</p><pre><code>[Unit]
Description=Sharkey daemon

[Service]
Type=simple
User=sharkey
ExecStart=/usr/bin/pnpm start
WorkingDirectory=/home/sharkey/Sharkey
Environment=&quot;NODE_OPTIONS=--max-old-space-size=8192&quot;
Environment=&quot;NODE_ENV=production&quot;
TimeoutSec=60
StandardOutput=journal
StandardError=journal
SyslogIdentifier=sharkey
Restart=always

[Install]
WantedBy=multi-user.target
</code></pre><p>(you may need to change that <code>/usr/bin/pnpm</code> if you&rsquo;re not using
your system NodeJS).</p><p>Then:</p><pre><code>sudo systemctl daemon-reload
sudo systemctl enable sharkey
sudo systemctl start sharkey
</code></pre><p>After that, <code>systemctl status sharkey</code> should show that it&rsquo;s
running.</p><h3 id=with-openrc>With OpenRC <a href=#with-openrc class=anchor aria-hidden=true>#</a></h3><p>Create a file <code>/etc/init.d/sharkey</code> containing:</p><pre><code>#!/sbin/openrc-run

name=sharkey
description=&quot;Sharkey daemon&quot;

command=&quot;/usr/bin/pnpm&quot;
command_args=&quot;start&quot;
command_user=&quot;sharkey&quot;

supervisor=&quot;supervise-daemon&quot;
supervise_daemon_args=&quot; -d /home/sharkey/Sharkey -e NODE_ENV=production -e \&quot;NODE_OPTIONS=--max-old-space-size=8192\&quot;

pidfile=&quot;/run/${RC_SVCNAME}.pid&quot;

depend() {
  need net
  use logger nginx
}
</code></pre><p>(you may need to change that <code>/usr/bin/pnpm</code> if you&rsquo;re not using
your system NodeJS).</p><p>Then:</p><pre><code>sudo rc-update add sharkey
sudo rc-service sharkey start
</code></pre><p>After that, <code>rc-service sharkey status</code> should show that it&rsquo;s
running.</p><h2 id=configure-the-web-server>Configure the web server <a href=#configure-the-web-server class=anchor aria-hidden=true>#</a></h2><h3 id=nginx>NGINX <a href=#nginx class=anchor aria-hidden=true>#</a></h3><p>See <a href=https://misskey-hub.net/en/docs/admin/nginx.html>Misskey&rsquo;s
instructions</a></p><h2 id=update-sharkey>Update Sharkey <a href=#update-sharkey class=anchor aria-hidden=true>#</a></h2><p>Very similar to the installation process:</p><pre><code>sudo -u sharkey -i
cd Sharkey
git checkout stable
git pull --recurse-submodules
pnpm install --frozen-lockfile
pnpm run build
pnpm run migrate
</code></pre><p>Then restart the service (<code>sudo systemctl restart sharkey</code> or
<code>rc-service sharkey restart</code>).</p><p>If there&rsquo;s problems with updating, you can run <code>pnpm run clean</code>
and/or <code>pnpm run clean-all</code> which will remove all the effects of a
previous build, then you can install+build+migrate+restart again.</p><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"></div><div class="docs-navigation d-flex justify-content-between"><a class=ms-auto href=/docs/install/migrate/><div class="card my-1"><div class="card-body py-2">Migrating from another software &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a class=text-muted href=https://pages.github.com/>Github Pages</a>, <a class=text-muted href=https://gohugo.io/>Hugo</a>, and <a class=text-muted href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.223fd2b247a18dd9421f5eac2b8f740a338445314a3282ea82752d0b792e51c8d367c12fd27ceb7c011214399deee96a6fdfc51943f9bbef1aa079653d1e4bdc.js integrity="sha512-Ij/SskehjdlCH16sK490CjOERTFKMoLqgnUtC3kuUcjTZ8Ev0nzrfAESFDmd7ulqb9/FGUP5u+8aoHllPR5L3A==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.8b2d7ddd72ba2c88d5107387eb3b66b90f1f864fd5afef6aed284425efb5919a9bc092f653f2985a205b85b0a158f70b460643ba2b71ccf7d3c1c107c3a4b609.js integrity="sha512-iy193XK6LIjVEHOH6ztmuQ8fhk/Vr+9q7ShEJe+1kZqbwJL2U/KYWiBbhbChWPcLRgZDuitxzPfTwcEHw6S2CQ==" crossorigin=anonymous defer></script>
<script src=/main.min.57d9a84956f7d60008c47938c7fdd2f75e8618ff1d09c5a5e2b32f91debaf7681f7ceca8b51aded60067c2136172134a91ebc0674487c76a04e3244d927ebdde.js integrity="sha512-V9moSVb31gAIxHk4x/3S916GGP8dCcWl4rMvkd6692gffOyotRre1gBnwhNhchNKkevAZ0SHx2oE4yRNkn693g==" crossorigin=anonymous defer></script>
<script src=https://docs.joinsharkey.org/index.min.3fa4117edc7fbd8bda94c4dda216b2f0530c99f6463a726eda1f1367c7f143a70e6204b2868ca8bc4529712783c1526e8d6fa3dff18fb2849ff510ae0832c421.js integrity="sha512-P6QRftx/vYvalMTdohay8FMMmfZGOnJu2h8TZ8fxQ6cOYgSyhoyovEUpcSeDwVJujW+j3/GPsoSf9RCuCDLEIQ==" crossorigin=anonymous defer></script></body></html>